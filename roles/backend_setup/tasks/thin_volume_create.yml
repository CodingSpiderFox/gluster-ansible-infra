---
# Create a thin logical volume. A thinpool should already have been created by
# now. There can be more than one thinvolume on a thinpool

- name: Create thin logical volume
  lvol:
     state: present
     vg: "{{ item.vgname }}"
     lv: "{{ item.lvname }}"
     thinpool: "{{ item.thinpool }}"
     size: "{{ item.lvsize }}"
  with_items: "{{ gluster_infra_lv_logicalvols }}"
  when:  gluster_infra_lv_logicalvols is defined and gluster_infra_lv_logicalvols is not none and gluster_infra_lv_logicalvols|length >0 and item is defined and item is not none
